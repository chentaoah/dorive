<h1 align="center">Dorive</h1>
<h3 align="center">è½»é‡çº§é¢†åŸŸé©±åŠ¨æ¡†æ¶</h3>
<p align="center">
  <img src="https://img.shields.io/github/license/chentaoah/dorive" alt="license">
  <img src="https://img.shields.io/github/v/release/chentaoah/dorive?display_name=tag&include_prereleases" alt="release">
  <img src="https://img.shields.io/github/commit-activity/y/chentaoah/dorive" alt="commit">
  <img src="https://img.shields.io/github/stars/chentaoah/dorive?color=%231890FF&style=flat-square" alt="stars">
</p>
<hr/>
ğŸ”¥ğŸ”¥ğŸ”¥doriveè½»é‡çº§é¢†åŸŸé©±åŠ¨æ¡†æ¶ï¼Œå¸®åŠ©å¼€å‘è€…é€šè¿‡å»ºæ¨¡ï¼Œå¿«é€Ÿæ„å»ºå…·æœ‰å¯ç»´æŠ¤æ€§ã€å¯æ‹“å±•æ€§çš„åº”ç”¨ç¨‹åºã€‚

**æ¨èç†ç”±ï¼š**

- **çº§è”æ–°å¢ã€æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤**
- **NoSQL**
- **é¢å‘å¯¹è±¡**
- **äº‹ä»¶é©±åŠ¨**
- **ä»£ç ç”Ÿæˆ**

### ğŸ‹SmartUIæ¨¡å¼

**ä»¥UIç•Œé¢é©±åŠ¨æ•°æ®åº“è®¾è®¡ï¼Œå†ä»¥æ•°æ®åº“è®¾è®¡é©±åŠ¨ä»£ç å¼€å‘çš„æ¨¡å¼ï¼Œç§°ä¸ºâ€œSmartUIæ¨¡å¼â€ã€‚**

**ä¼˜ç‚¹ï¼š**

- æ•ˆç‡é«˜ï¼Œèƒ½åœ¨çŸ­æ—¶é—´å†…å®ç°ç®€å•çš„åº”ç”¨ç¨‹åºã€‚
- å¯¹å¼€å‘äººå‘˜çš„è¦æ±‚ä½ï¼Œå‡ ä¹ä¸éœ€è¦åŸ¹è®­ã€‚
- æœ‰æ—¶å¯ä»¥å…‹æœéœ€æ±‚åˆ†æä¸Šçš„ä¸è¶³ï¼Œåªéœ€è¦æ»¡è¶³åŸå‹å³å¯ã€‚
- ç¨‹åºä¹‹é—´ç‹¬ç«‹æ€§é«˜ï¼Œå¯ä»¥ç›¸å¯¹å‡†ç¡®åœ°å®‰æ’å°çš„äº¤ä»˜å‘¨æœŸã€‚
- èƒ½å¤Ÿä¾¿æ·åœ°åœ¨å…³ç³»æ•°æ®åº“ä¸Šæ„å»ºåº”ç”¨ã€‚
- é€šè¿‡UIç•Œé¢ï¼Œèƒ½å¤Ÿå¤§è‡´äº†è§£åå°çš„é€»è¾‘ã€‚

**ç¼ºç‚¹ï¼š**

- ä¸šåŠ¡å˜åŒ–å¿«ï¼Œåº”ç”¨ç¨‹åºå¿«é€Ÿæ— åºè†¨èƒ€ï¼Œç›´åˆ°æ— æ³•æ”¯æ’‘ä¸šåŠ¡è€Œé‡æ„ã€‚
- éœ€æ±‚åˆ†æä¸è¶³ï¼Œæ»¡è¶³äºåŸå‹ï¼Œå®¹æ˜“åç¦»ä¸šåŠ¡æ ¸å¿ƒã€‚
- ä¸‹å±‚çš„æ”¹åŠ¨ï¼Œå®¹æ˜“åœ¨ä¸Šå±‚è¢«æ”¾å¤§ï¼Œå¯¼è‡´å¼€å‘æˆæœ¬é«˜ï¼Œç³»ç»Ÿå†…éƒ¨åƒµåŒ–ã€‚
- åº”ç”¨ç¨‹åºå¼€å‘ï¼Œæ— æ³•è„±ç¦»æ•°æ®åº“ã€‚
- éš¾ä»¥ä½¿ç”¨ç»Ÿä¸€æœ‰æ•ˆçš„æ–¹å¼ï¼Œæ„å»ºå¤æ‚çš„åº”ç”¨ç¨‹åºã€‚

### ğŸ‘¬é¢†åŸŸé©±åŠ¨

**ä»¥ä¸šåŠ¡æ ¸å¿ƒé©±åŠ¨æ¨¡å‹è®¾è®¡ï¼Œå†ä»¥æ¨¡å‹è®¾è®¡é©±åŠ¨ä»£ç å¼€å‘çš„æ–¹å¼ï¼Œç§°ä¸ºé¢†åŸŸé©±åŠ¨ã€‚**

**ä¼˜ç‚¹ï¼š**

- é¢†åŸŸæ¨¡å‹å¯ä»¥ä½œä¸ºäº§å“ã€å¼€å‘ã€æµ‹è¯•äººå‘˜æ²Ÿé€šæ—¶çš„ç»Ÿä¸€è¯­è¨€ã€‚
- é¢†åŸŸæ¨¡å‹æ•°æ®é«˜åº¦å†…èšï¼Œå¯ç»´æŠ¤æ€§å¼ºã€ä»£ç è€¦åˆä½ã€‚
- é¢†åŸŸæ¨¡å‹çš„å¼€å‘è¿‡ç¨‹æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå¯å¤ç”¨æ€§ã€å¯æ‹“å±•æ€§å¼ºã€‚
- èƒ½æœ€å¤§ç¨‹åº¦ï¼Œå‡å°‘ç³»ç»Ÿå†…éƒ¨çš„åƒµåŒ–ä¸ç³»ç»Ÿé—´çš„è…åŒ–ã€‚
- ä¸å¼ºä¾èµ–äºæ•°æ®åº“ï¼Œå®¹æ˜“ä¸ä¸åŒçš„å­˜å‚¨å¼•æ“è¿›è¡Œé›†æˆã€‚
- åœ¨æˆ˜ç•¥å±‚é¢ï¼Œèƒ½å€Ÿç”¨é¢†åŸŸæ¨¡å‹ï¼Œè¿›è¡Œä¸šåŠ¡æ¶æ„çš„é¡¶å±‚è®¾è®¡ã€‚

**ç¼ºç‚¹ï¼š**

- å¯¹å¼€å‘äººå‘˜çš„è¦æ±‚é«˜ã€‚ï¼ˆèƒ½å¤ŸæŒæ¡ä¸€äº›å¸¸è§çš„è®¾è®¡æ¨¡å¼ï¼‰
- ç›¸è¾ƒäºUIé©±åŠ¨ï¼Œéœ€è¦åšå‰æœŸçš„å‡†å¤‡å·¥ä½œã€‚ï¼ˆæ²Ÿé€šä¸æ¶ˆåŒ–ä¸šåŠ¡çŸ¥è¯†ï¼‰
- ä¸€èˆ¬ä»¥æ•´ä¸ªæ¨¡å—äº¤ä»˜ï¼Œä¸å®¹æ˜“ä»¥è¾ƒå°çš„å•å…ƒäº¤ä»˜ã€‚

### ğŸ¤¸é¢ä¸´çš„æŒ‘æˆ˜

- ä¸šåŠ¡çŸ¥è¯†çš„æç‚¼ä¸æŠ½è±¡
- é¢å‘å¯¹è±¡ç¼–ç¨‹ + æ•°æ®æŒä¹…åŒ–

### ğŸ“Šæ¶æ„è®¾è®¡

![avatar](https://gitee.com/digital-engine/dorive/raw/master/doc/img/framework.png)

### ğŸ„å¿«é€Ÿå¼€å§‹

```xml
<dependency>
    <groupId>com.gitee.digital-engine</groupId>
    <artifactId>dorive-spring-boot-starter</artifactId>
    <version>3.3.1</version>
</dependency>
```

### ğŸ§¡ä»£ç ç¤ºä¾‹

ä»¥SaasåŒ–åœºæ™¯ä¸ºä¾‹ï¼Œä¸ºç§Ÿæˆ·å»ºæ¨¡ã€‚

#### å®šä¹‰å®ä½“

```java
/**
 * ç§Ÿæˆ·èšåˆ
 * name å®ä½“åç§°
 * source æ•°æ®æ¥æº
 */
@Data
@Entity(name = "tenant", source = SysTenantMapper.class)
public class Tenant {
    /**
     * é€‰å–å™¨ï¼Œå†³å®šæ¯æ¬¡æ“ä½œçš„èŒƒå›´
     */
    public static final Selector ALL = new NameSelector("*");
    public static final Selector ONLY_TENANT = new NameSelector("tenant");
    
    private Integer id;
    private String tenantCode;
    
    /**
     * éƒ¨é—¨å®ä½“
     * field å­—æ®µåç§°
     * bindExp ç»‘å®šå­—æ®µè¡¨è¾¾å¼
     */
    @Entity
    @Binding(field = "tenantId", bindExp = "./id")
    private List<Department> departments;
    
    /**
     * ç”¨æˆ·å®ä½“
     * property ç»‘å®šå¯¹è±¡å†…éƒ¨å±æ€§
     */
    @Entity
    @Binding(field = "deptId", bindExp = "./departments", property = "id")
    private List<User> users;
}
```

#### å®šä¹‰ä»“å‚¨

```java
@RootRepository
@AllArgsConstructor
@EqualsAndHashCode(callSuper = false)
@CoatingScan("xxx.xxx.xxx.xxx.xxx.query")
public class TenantRepository extends MybatisPlusRepository<Tenant, Integer> {
}
```

#### å®šä¹‰æŸ¥è¯¢å¯¹è±¡

```java
package xxx.xxx.xxx.xxx.xxx.query;
@Data
@Coating
public class TenantQuery {
    private String userCode;
    private String sortBy;
    private String order;
    private Integer page;
    private Integer limit;
}
```

#### æ–°å¢æ•°æ®

```java
// å¼€å‘è€…æ— éœ€è®¾ç½®å®ä½“ä¹‹é—´çš„å…³è”id
Tenant tenant = new Tenant();
tenant.setTenantCode("tenant");

Department department = new Department();
department.setDeptCode("dept");
tenant.setDepartments(Collections.singletonList(department));

User user = new User();
user.setUserCode("user");
tenant.setUser(Collections.singletonList(user));

int count = tenantRepository.insert(Tenant.ALL, tenant);
```

#### æŸ¥è¯¢æ•°æ®

```java
// å¼€å‘è€…æ— éœ€ç¼–å†™å¤æ‚çš„æŸ¥è¯¢SQL
TenantQuery tenantQuery = new TenantQuery();
tenantQuery.setUserCode("000001");
tenantQuery.setSortBy("id");
tenantQuery.setOrder("desc");
tenantQuery.setPage(1);
tenantQuery.setLimit(10);

List<Tenant> tenants = tenantRepository.selectByCoating(Tenant.ALL, tenantQuery);
```

#### æ›´æ–°æ•°æ®

```java
Tenant tenant = tenantRepository.selectByPrimaryKey(Tenant.ONLY_TENANT, 1);
tenant.setTenantCode("tenant1");

int count = tenantRepository.update(Tenant.ONLY_TENANT, tenant);
```

#### åˆ é™¤æ•°æ®

```java
// å¼€å‘è€…é€šè¿‡èšåˆå¯¹è±¡çš„idï¼Œå³å¯åˆ é™¤æ‰€æœ‰æ•°æ®
int count = tenantRepository.deleteByPrimaryKey(Tenant.ALL, 1);
```
