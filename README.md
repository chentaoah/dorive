<h1 align="center">Dorive</h1>
<h3 align="center">è½»é‡çº§é¢†åŸŸé©±åŠ¨æ¡†æ¶</h3>
<p align="center">
  <img src="https://img.shields.io/github/license/chentaoah/dorive" alt="license">
  <img src="https://img.shields.io/github/v/release/chentaoah/dorive?display_name=tag&include_prereleases" alt="release">
  <img src="https://img.shields.io/github/commit-activity/y/chentaoah/dorive" alt="commit">
  <img src="https://img.shields.io/github/stars/chentaoah/dorive?color=%231890FF&style=flat-square" alt="stars">
</p>
<hr/>
ğŸ”¥ğŸ”¥ğŸ”¥doriveè½»é‡çº§é¢†åŸŸé©±åŠ¨æ¡†æ¶ï¼Œå¸®åŠ©å¼€å‘è€…é€šè¿‡å»ºæ¨¡ï¼Œå¿«é€Ÿæ„å»ºå…·æœ‰å¯ç»´æŠ¤æ€§ã€å¯æ‹“å±•æ€§çš„åº”ç”¨ç¨‹åºã€‚

### ğŸ‹SmartUIæ¨¡å¼

**ä»¥UIç•Œé¢é©±åŠ¨æ•°æ®åº“è®¾è®¡ï¼Œå†ä»¥æ•°æ®åº“è®¾è®¡é©±åŠ¨ä»£ç å¼€å‘çš„æ¨¡å¼ï¼Œç§°ä¸ºâ€œSmartUIæ¨¡å¼â€ã€‚**

**ä¼˜ç‚¹ï¼š**

- æ•ˆç‡é«˜ï¼Œèƒ½åœ¨çŸ­æ—¶é—´å†…å®ç°ç®€å•çš„åº”ç”¨ç¨‹åºã€‚
- å¯¹å¼€å‘äººå‘˜çš„è¦æ±‚ä½ï¼Œå‡ ä¹ä¸éœ€è¦åŸ¹è®­ã€‚
- æœ‰æ—¶å¯ä»¥å…‹æœéœ€æ±‚åˆ†æä¸Šçš„ä¸è¶³ï¼Œåªéœ€è¦æ»¡è¶³åŸå‹å³å¯ã€‚
- ç¨‹åºä¹‹é—´ç‹¬ç«‹æ€§é«˜ï¼Œå¯ä»¥ç›¸å¯¹å‡†ç¡®åœ°å®‰æ’å°çš„äº¤ä»˜å‘¨æœŸã€‚
- èƒ½å¤Ÿä¾¿æ·åœ°åœ¨å…³ç³»æ•°æ®åº“ä¸Šæ„å»ºåº”ç”¨ã€‚
- é€šè¿‡UIç•Œé¢ï¼Œèƒ½å¤Ÿå¤§è‡´äº†è§£åå°çš„é€»è¾‘ã€‚

**ç¼ºç‚¹ï¼š**

- åªæ»¡è¶³åŸå‹ï¼Œä½†æ— æ³•æ»¡è¶³å¿«é€Ÿå˜åŒ–çš„æ–°çš„ä¸šåŠ¡åœºæ™¯ã€‚
- ç¼ºä¹å¯¹ä¸šåŠ¡è¡Œä¸ºçš„æç‚¼ï¼Œå®¹æ˜“åç¦»ä¸šåŠ¡æ ¸å¿ƒï¼ŒäºŒæ¬¡å¼€å‘æˆæœ¬é«˜ã€‚
- åº”ç”¨ç¨‹åºå¼€å‘ï¼Œæ— æ³•è„±ç¦»æ•°æ®åº“ã€‚
- éš¾ä»¥ä½¿ç”¨ç»Ÿä¸€æœ‰æ•ˆçš„æ–¹å¼ï¼Œæ„å»ºå¤æ‚çš„åº”ç”¨ç¨‹åºã€‚

### ğŸ‘¬é¢†åŸŸé©±åŠ¨

**ä»¥ä¸šåŠ¡æ ¸å¿ƒé©±åŠ¨æ¨¡å‹è®¾è®¡ï¼Œå†ä»¥æ¨¡å‹è®¾è®¡é©±åŠ¨ä»£ç å¼€å‘çš„æ–¹å¼ï¼Œç§°ä¸ºé¢†åŸŸé©±åŠ¨ã€‚**

**ä¼˜ç‚¹ï¼š**

- é¢†åŸŸæ¨¡å‹æ˜¯ä¸šåŠ¡çŸ¥è¯†çš„é«˜åº¦æ¦‚æ‹¬ï¼Œå®¹æ˜“åœ¨äº§å“ã€å¼€å‘ã€æµ‹è¯•äººå‘˜ä¹‹é—´è¿›è¡Œä¼ æ’­ã€‚
- é¢†åŸŸæ¨¡å‹æ•°æ®é«˜åº¦å†…èšï¼Œå¯ç»´æŠ¤æ€§å¼ºã€ä»£ç è€¦åˆä½ã€‚
- é¢†åŸŸæ¨¡å‹çš„å¼€å‘è¿‡ç¨‹æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå¯å¤ç”¨æ€§ã€å¯æ‹“å±•æ€§å¼ºã€‚
- ä¸å¼ºä¾èµ–äºæ•°æ®åº“ï¼Œå®¹æ˜“ä¸ä¸åŒçš„å­˜å‚¨å¼•æ“è¿›è¡Œé›†æˆã€‚
- åœ¨æˆ˜ç•¥å±‚é¢ï¼Œèƒ½å€Ÿç”¨é¢†åŸŸæ¨¡å‹ï¼Œè¿›è¡Œä¸šåŠ¡æ¶æ„çš„é¡¶å±‚è®¾è®¡ã€‚
- èƒ½æœ€å¤§ç¨‹åº¦ï¼Œå‡å°‘ç³»ç»Ÿå†…éƒ¨çš„åƒµåŒ–ä¸ç³»ç»Ÿé—´çš„è…åŒ–ã€‚

**ç¼ºç‚¹ï¼š**

- å¯¹å¼€å‘äººå‘˜çš„è¦æ±‚é«˜ã€‚ï¼ˆèƒ½å¤Ÿç†è§£å’Œè¿ç”¨ä¸€äº›è®¾è®¡æ¨¡å¼ï¼‰
- ç›¸è¾ƒäºUIé©±åŠ¨ï¼Œéœ€è¦åšå‰æœŸçš„å‡†å¤‡å·¥ä½œã€‚ï¼ˆæ²Ÿé€šä¸æ¶ˆåŒ–ä¸šåŠ¡çŸ¥è¯†ï¼‰
- ä¸€èˆ¬ä»¥æ•´ä¸ªæ¨¡å—äº¤ä»˜ï¼Œä¸å®¹æ˜“ä»¥è¾ƒå°çš„å•å…ƒäº¤ä»˜ã€‚

### ğŸ¤¸é¢ä¸´çš„æŒ‘æˆ˜

- ä¸šåŠ¡çŸ¥è¯†çš„æç‚¼å’ŒæŠ½è±¡
- é¢å‘å¯¹è±¡ç¼–ç¨‹ + æ•°æ®æŒä¹…åŒ–

### ğŸ•ºåŠŸèƒ½ç‚¹

| åŠŸèƒ½ç‚¹         | æè¿°                                                         |
| -------------- | ------------------------------------------------------------ |
| ä¾èµ–æ³¨å…¥æ ¡éªŒ   | ä¾èµ–æ³¨å…¥æ—¶ï¼Œæ ¡éªŒBeanæ‰€å±çš„é¢†åŸŸæ˜¯å¦ä¸€è‡´ã€‚å¦‚æœä¸ä¸€è‡´ï¼Œä¼šç»™å‡ºè­¦å‘Šã€‚ |
| æ¨¡å‹å£°æ˜       | å¯åŠ¨æ—¶ï¼Œå°†å¸¦æœ‰@Entityæ³¨è§£çš„Javaç±»ï¼Œè§£æä¸ºä¸€ä¸ªå®ä½“ã€‚å¤šä¸ªå®ä½“åµŒå¥—ï¼Œè§†ä¸ºä¸€ä¸ªèšåˆã€‚<br />é€šè¿‡ä»“å‚¨ï¼Œå¯ä»¥å¯¹èšåˆï¼Œè¿›è¡Œçº§è”å¢ã€åˆ ã€æ”¹ã€æŸ¥æ“ä½œã€‚ |
| äº‹ä»¶é€šçŸ¥       | å½“ä»“å‚¨æ“ä½œä¸€ä¸ªèšåˆæ—¶ï¼Œä¼šå‘å¤–å‘é€å¢ã€åˆ ã€æ”¹äº‹ä»¶ã€‚             |
| å®ä½“åŠ¨æ€æ„é€    | é€šè¿‡è‡ªå®šä¹‰å·¥å‚ï¼Œå¯ä»¥å®ç°åŠ¨æ€æ„é€ å®ä½“å¯¹è±¡ã€‚ä»è€Œï¼Œå®ç°æ–¹æ³•é‡å†™ã€ä»¥åŠåŠ¨æ€çº§è”æŸ¥è¯¢ã€‚ |
| å®ä½“å˜æ›´æŒä¹…åŒ– | å®ä½“å˜æ›´è‡ªèº«å±æ€§åï¼Œé—´æ¥åŒæ­¥åˆ°æ•°æ®åº“ã€‚                       |
| è¡¨ç»“æ„ç”Ÿæˆ     | æ ¹æ®å®ä½“ï¼Œç”Ÿæˆå¯¹åº”çš„å»ºè¡¨è¯­å¥ã€‚                               |

### ğŸ“–é¡¹ç›®ç»“æ„

| æ¨¡å—                       | æè¿°                                          |
| -------------------------- | --------------------------------------------- |
| dorive-injection           | å®ç°ä¾èµ–æ³¨å…¥æ ¡éªŒ                              |
| dorive-proxy               | å®ç°åŠ¨æ€ä»£ç†ï¼Œå–ä»£åå°„                        |
| dorive-core                | å®ç°å®ä½“è§£æã€ä»“å‚¨CRUDçš„æ ¸å¿ƒé€»è¾‘              |
| dorive-event               | å®ç°ä»“å‚¨æ“ä½œæ—¶çš„äº‹ä»¶é€šçŸ¥æœºåˆ¶                  |
| dorive-coating             | å®ç°é€šè¿‡é˜²è…å±‚å¯¹è±¡çš„æŸ¥è¯¢æœºåˆ¶                  |
| dorive-spring-boot-starter | å®ç°ä¸mybatis-plusçš„é›†æˆ                      |
| dorive-generator           | å®ç°æ ¹æ®å®ä½“ç”Ÿæˆæ•°æ®åº“è¡¨ç»“æ„                  |
| dorive-service             | å®ç°æŠ½è±¡çš„Serviceä¸Controllerï¼Œä¾›å¼€å‘è€…ç»§æ‰¿ã€‚ |

### ğŸ“Šæ¶æ„è®¾è®¡

![avatar](https://gitee.com/digital-engine/dorive/raw/master/doc/img/domain_model.png)

### ğŸ„å¿«é€Ÿå¼€å§‹

```xml
<dependency>
    <groupId>com.gitee.digital-engine</groupId>
    <artifactId>dorive-spring-boot-starter</artifactId>
    <version>3.0.0</version>
</dependency>
```

### ğŸ§¡ä»£ç ç¤ºä¾‹

ä»¥SaasåŒ–åœºæ™¯ä¸ºä¾‹ï¼Œä¸ºç§Ÿæˆ·å»ºæ¨¡ã€‚

#### å®šä¹‰å®ä½“

```java
/**
 * ç§Ÿæˆ·å®ä½“ï¼Œæ­¤å¤„äº¦å¯è§†ä¸ºç§Ÿæˆ·èšåˆ
 * mapper æ•°æ®æº
 */
@Data
@Entity(mapper = SysTenantMapper.class)
public class Tenant {
    /**
     * åœºæ™¯å€¼é›†åˆã€‚
     * ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨å®šä¹‰å®ä½“çš„åŒæ—¶ï¼Œä¼šå®šä¹‰è§¦å‘çš„åœºæ™¯å€¼ã€‚å¼€å‘è€…å¯ä»¥æŒ‡å®šåœºæ™¯å€¼ï¼Œæ¥å†³å®šæ¯æ¬¡æ“ä½œçš„èŒƒå›´ã€‚
     * å®šä¹‰å¸¸é‡ALLçš„ä½œç”¨æ˜¯ï¼Œå°†å¸¸ç”¨çš„åœºæ™¯å€¼é›†åˆç»Ÿä¸€ç»´æŠ¤èµ·æ¥ã€‚
     */
    public static final String[] ALL = new String[]{"depts", "users"};
    
    private Integer id;
    private String tenantCode;
    
    /**
     * éƒ¨é—¨å®ä½“
     * scenes åœºæ™¯å€¼
     * mapper æ•°æ®æº
     * field å®ä½“å­—æ®µ
     * bindExp ç»‘å®šå­—æ®µè¡¨è¾¾å¼
     */
    @Entity(scenes = "depts", mapper = SysDeptMapper.class)
    @Binding(field = "tenantId", bindExp = "./id")
    private List<Department> departments;
    
    /**
     * ç”¨æˆ·å®ä½“
     * property ç»‘å®šå­—æ®µçš„å†…éƒ¨å±æ€§
     */
    @Entity(scenes = "users", mapper = SysUserMapper.class)
    @Binding(field = "deptId", bindExp = "./departments", property = "id")
    private List<User> users;
}
```

#### å®šä¹‰ä»“å‚¨

```java
@RootRepository
@AllArgsConstructor
@EqualsAndHashCode(callSuper = false)
@CoatingScan("xxx.xxx.xxx.xxx.xxx.query")
public class TenantRepository extends MybatisPlusRepository<Tenant, Integer> {
}
```

#### å®šä¹‰æŸ¥è¯¢å¯¹è±¡

```java
package xxx.xxx.xxx.xxx.xxx.query;
@Data
@Coating
public class TenantQuery {
    private String userCode;
    private String orderByDesc;
    private Integer pageNum;
    private Integer pageSize;
}
```

#### æ–°å¢æ•°æ®

```java
BoundedContext boundedContext = new BoundedContext(Tenant.ALL);

// å¼€å‘è€…æ— éœ€è®¾ç½®å®ä½“ä¹‹é—´çš„å…³è”id
Tenant tenant = new Tenant();
tenant.setTenantCode("tenant");

Department department = new Department();
department.setDeptCode("dept");
tenant.setDepartments(Collections.singletonList(department));

User user = new User();
user.setUserCode("user");
tenant.setUser(Collections.singletonList(user));

int count = tenantRepository.insert(boundedContext, tenant);
```

#### æŸ¥è¯¢æ•°æ®

```java
BoundedContext boundedContext = new BoundedContext(Tenant.ALL);

// å¼€å‘è€…æ— éœ€ç¼–å†™å¤æ‚çš„æŸ¥è¯¢SQL
TenantQuery tenantQuery = new TenantQuery();
tenantQuery.setUserCode("000001");
tenantQuery.setOrderByDesc("id");
tenantQuery.setPageNum(1L);
tenantQuery.setPageSize(10L);

List<Tenant> tenants = tenantRepository.selectByCoating(boundedContext, tenantQuery);
```

#### æ›´æ–°æ•°æ®

```java
BoundedContext boundedContext = new BoundedContext();

Tenant tenant = tenantRepository.selectByPrimaryKey(boundedContext, 1);
tenant.setTenantCode("tenant1");

int count = tenantRepository.update(boundedContext, tenant);
```

#### åˆ é™¤æ•°æ®

```java
BoundedContext boundedContext = new BoundedContext(Tenant.ALL);
// å¼€å‘è€…é€šè¿‡èšåˆå¯¹è±¡çš„idï¼Œå³å¯åˆ é™¤æ‰€æœ‰æ•°æ®
int count = tenantRepository.deleteByPrimaryKey(boundedContext, 1);
```

#### 